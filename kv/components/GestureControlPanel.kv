<GestureControlPanel>:
    size_hint: 1, 1
    id: layout

    CustomButton:
        size: 0, 0

    CustomButton:
        id: toggleCam
        text: ''
        size_hint: None, None
        size: (root.parent.height / 25, root.parent.height / 25) if root.threadLoaded else (0, 0)
        disabled: not root.threadLoaded
        pos_hint: {'center_y': 0}
        x: layout.width - self.width * 1.5 - 10
        
        normal_image: root.icons['pause'] if root.camera.running else root.icons['play']
        pressed_image: root.icons['pause'] if root.camera.running else root.icons['play']

        on_release: root.camera.toggleCapture()

    Image:
        id: videoIcon
        source: root.icons['video']
        size_hint: 0.2, 0.2
        pos_hint: {'center_x': 0.5, 'center_y': 0.55}
        opacity: 0 if root.threadLoaded else 1

    RotatingSpinner:
        id: spinner
        size_hint: 0.5, 0.5
        pos_hint: {'center_x': 0.5, 'center_y': 0.55}
        opacity: 0 if root.threadLoaded else 1
        numLines: 3
        lineThickness: 2
        animationDuration: 3
        gap: 50
        color: 18/255, 18/255, 18/255, 0.87

    Label:
        id: statusLabel
        text: 'Loading dependencies...'
        font_name: root.fonts['poppins']['regular']
        size_hint: 0.3, 0.3
        pos_hint: {'center_x': 0.5, 'center_y': 0.2}
        opacity: 0 if root.threadLoaded else 1
        color: 18/255, 18/255, 18/255, 0.87
        font_size: 20
